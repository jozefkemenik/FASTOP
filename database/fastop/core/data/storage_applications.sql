/* Formatted on 24-11-2020 13:58:49 (QP5 v5.313) */
SET DEFINE OFF;

-- FDMS storages (all storages except IEA)

INSERT INTO STORAGE_APPLICATIONS(STORAGE_SID, APP_SID)
   SELECT S.STORAGE_SID, A.APP_SID
     FROM STORAGES S, APPLICATIONS A
    WHERE A.APP_ID IN ('FDMS') AND S.STORAGE_ID != 'IEA';

-- FDMSIE storages (IEA)

INSERT INTO STORAGE_APPLICATIONS(STORAGE_SID, APP_SID)
   SELECT S.STORAGE_SID, A.APP_SID
     FROM STORAGES S, APPLICATIONS A
    WHERE A.APP_ID = 'FDMSIE' AND S.STORAGE_ID = 'IEA';

-- DFM (all 'main' storages + custom)

INSERT INTO STORAGE_APPLICATIONS(STORAGE_SID, APP_SID)
   SELECT S.STORAGE_SID, A.APP_SID
     FROM STORAGES S, APPLICATIONS A
    WHERE A.APP_ID = 'DFM' AND (S.ALT_DESCR IS NOT NULL OR IS_CUSTOM = 'Y');

-- AMECO storages (all storages except IEA)

INSERT INTO STORAGE_APPLICATIONS(STORAGE_SID, APP_SID)
   SELECT S.STORAGE_SID, A.APP_SID
     FROM STORAGES S, APPLICATIONS A
    WHERE A.APP_ID IN ('AMECO') AND S.STORAGE_ID != 'IEA';

-- AUXTOOLS storages (all storages except IEA)
INSERT INTO STORAGE_APPLICATIONS(STORAGE_SID, APP_SID)
   SELECT S.STORAGE_SID, A.APP_SID
     FROM STORAGES S, APPLICATIONS A
    WHERE A.APP_ID IN ('AUXTOOLS') AND S.STORAGE_ID != 'IEA';

-- FPADMIN storages (all storages except IEA)
INSERT INTO STORAGE_APPLICATIONS(STORAGE_SID, APP_SID)
   SELECT S.STORAGE_SID, A.APP_SID
     FROM STORAGES S, APPLICATIONS A
    WHERE A.APP_ID IN ('FPADMIN') AND S.STORAGE_ID != 'IEA';

-- COSNAP storages (all storages except IEA)
INSERT INTO STORAGE_APPLICATIONS(STORAGE_SID, APP_SID)
   SELECT S.STORAGE_SID, A.APP_SID
     FROM STORAGES S, APPLICATIONS A
    WHERE A.APP_ID IN ('COSNAP') AND S.STORAGE_ID != 'IEA';

-- Other Apps (only Final storage)

INSERT INTO STORAGE_APPLICATIONS(STORAGE_SID, APP_SID)
   SELECT S.STORAGE_SID, A.APP_SID
     FROM STORAGES S, APPLICATIONS A
    WHERE A.APP_ID NOT IN ('FDMS', 'FDMSIE', 'DFM', 'AUXTOOLS', 'FPADMIN', 'AMECO') AND S.STORAGE_ID = 'FINAL';


COMMIT;
